import streamlit as st

st.set_page_config(page_title="Smart Unit Converter", page_icon="ðŸ”", layout="centered")

st.title("ðŸ” Smart Unit Converter")
st.caption("Fast, clean and interactive conversions â€” hours, miles, kg, degrees, temperature and more!")

st.markdown("---")

with st.sidebar:
    st.header("Settings")
    precision = st.number_input("Decimal places for result", min_value=0, max_value=6, value=4, step=1)
    theme_help = st.checkbox("Show conversion formulas", value=False)
    st.write("\n")
    st.write("Made with â¤ï¸ using Streamlit")

options = {
    "Hours âžœ Minutes": "hours_to_minutes",
    "Miles âžœ Kilometers": "miles_to_km",
    "Kilograms âžœ Pounds": "kg_to_pounds",
    "Degrees âžœ Radians": "deg_to_rad",
    "Celsius âžœ Fahrenheit": "c_to_f",
}

choice = st.selectbox("Choose a conversion", list(options.keys()))

def hours_to_minutes(hours: float) -> float:
    return hours * 60

def miles_to_km(miles: float) -> float:
    return miles * 1.60934

def kg_to_pounds(kg: float) -> float:
    return kg * 2.20462

def deg_to_rad(deg: float) -> float:
    
    from math import pi
    return deg * (pi / 180)

def c_to_f(c: float) -> float:
    return (c * 9/5) + 32


mapping = {
    "hours_to_minutes": {"func": hours_to_minutes, "input_label": "Hours", "output_unit": "minutes"},
    "miles_to_km": {"func": miles_to_km, "input_label": "Miles", "output_unit": "kilometers"},
    "kg_to_pounds": {"func": kg_to_pounds, "input_label": "Kilograms", "output_unit": "pounds"},
    "deg_to_rad": {"func": deg_to_rad, "input_label": "Degrees", "output_unit": "radians"},
    "c_to_f": {"func": c_to_f, "input_label": "Celsius", "output_unit": "Fahrenheit"},
}

key = options[choice]
meta = mapping[key]


st.subheader(choice)
input_value = st.number_input(f"Enter {meta['input_label']}", value=1.0, format="%f")

col1, col2 = st.columns([3, 1])
with col1:
    if st.button("Convert"):
        try:
            result = meta['func'](float(input_value))
            formatted = round(result, precision)
            st.metric(label=f"Result ({meta['output_unit']})", value=f"{formatted}")

            
            if theme_help:
                if key == "hours_to_minutes":
                    st.info("Formula: minutes = hours Ã— 60")
                elif key == "miles_to_km":
                    st.info("Formula: kilometers = miles Ã— 1.60934")
                elif key == "kg_to_pounds":
                    st.info("Formula: pounds = kilograms Ã— 2.20462")
                elif key == "deg_to_rad":
                    st.info("Formula: radians = degrees Ã— (Ï€ / 180)")
                elif key == "c_to_f":
                    st.info("Formula: Fahrenheit = (Celsius Ã— 9/5) + 32")

            
            txt = f"Input: {input_value} {meta['input_label']}\nResult: {formatted} {meta['output_unit']}\n"
            st.download_button("Download result", data=txt, file_name="conversion_result.txt")

        except Exception as e:
            st.error("Something went wrong: " + str(e))

with col2:
    if st.button("Reset"):
        st.experimental_rerun()


st.markdown("---")
with st.expander("Examples & Tips (click to open)"):
    st.write("â€¢ Enter `2` hours and convert â†’ shows `120` minutes.")
    st.write("â€¢ Enter `5` miles and convert â†’ shows `8.0467` kilometers (rounded).")
    st.write("â€¢ Use the sidebar to change decimal precision.")

st.caption("Want more conversions (e.g., litersâ†’gallons, metersâ†’feet)? Reply and I'll add them!")
